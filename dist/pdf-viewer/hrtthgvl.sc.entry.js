const e=window.PdfViewer.h;class t{constructor(){this.enableToolbar=!0,this.enableSideDrawer=!0,this.enableSearch=!0}updateToolbarVisibility(){this.toolbarEl&&(this.enableToolbar?this.toolbarEl.classList.remove("hidden"):(this.toolbarEl.classList.add("hidden"),this.iframeEl.contentDocument.documentElement.style.setProperty("--toolbar-height","0px")))}updateSideDrawerVisibility(){this.sidebarToggleEl&&(this.enableSideDrawer?this.sidebarToggleEl.classList.remove("hidden"):this.sidebarToggleEl.classList.add("hidden"))}updateSearchVisibility(){this.searchToggleEl&&(this.enableSearch?this.searchToggleEl.classList.remove("hidden"):this.searchToggleEl.classList.add("hidden"))}print(){return new Promise(e=>{this.iframeEl.contentWindow.print(),this.iframeEl.contentWindow.addEventListener("afterprint",()=>{e()},{once:!0})})}updateScale(){this.setScale(this.scale)}setScale(e){const t=this.iframeEl.contentWindow;if(t&&t.PDFViewerApplication){const{pdfViewer:t}=this.iframeEl.contentWindow.PDFViewerApplication;t.currentScaleValue=e}}get viewerSrc(){return this.page?`${this.resourcesUrl}pdf-viewer-assets/viewer/web/viewer.html?file=${encodeURIComponent(this.src)}#page=${this.page}`:`${this.resourcesUrl}pdf-viewer-assets/viewer/web/viewer.html?file=${encodeURIComponent(this.src)}`}componentDidLoad(){this.iframeEl.onload=(()=>{this.setCSSVariables(),this.initButtonVisibility(),this.addEventListeners(),this.iframeLoaded=!0})}setCSSVariables(){for(let e=0;e<t.CSSVariables.length;e++){const i=getComputedStyle(this.element).getPropertyValue(t.CSSVariables[e]);this.iframeEl.contentDocument.documentElement.style.setProperty(t.CSSVariables[e],i)}}initButtonVisibility(){this.toolbarEl=this.iframeEl.contentDocument.body.querySelector("#toolbarContainer"),this.sidebarToggleEl=this.iframeEl.contentDocument.body.querySelector("#sidebarToggle"),this.searchToggleEl=this.iframeEl.contentDocument.body.querySelector("#viewFind"),this.updateToolbarVisibility(),this.updateSideDrawerVisibility(),this.updateSearchVisibility()}addEventListeners(){this.viewerContainer=this.iframeEl.contentDocument.body.querySelector("#viewerContainer"),this.viewerContainer.addEventListener("pagechange",this.handlePageChange.bind(this)),this.viewerContainer.addEventListener("click",this.handleLinkClick.bind(this)),this.iframeEl.contentDocument.addEventListener("pagesloaded",()=>{this.scale&&this.setScale(this.scale)})}handlePageChange(e){this.pageChange.emit(e.pageNumber)}handleLinkClick(e){e.preventDefault();const t=e.target.closest(".linkAnnotation > a");if(t){if(t.classList.contains("internalLink"))return;const i=e.target.closest(".linkAnnotation > a").href||"";this.onLinkClick.emit(i)}}render(){return e("iframe",{class:this.iframeLoaded?"loaded":"",ref:e=>this.iframeEl=e,src:this.viewerSrc})}static get is(){return"phemium-pdf-viewer"}static get encapsulation(){return"shadow"}static get properties(){return{element:{elementRef:!0},enableSearch:{type:Boolean,attr:"enable-search",watchCallbacks:["updateSearchVisibility"]},enableSideDrawer:{type:Boolean,attr:"enable-side-drawer",watchCallbacks:["updateSideDrawerVisibility"]},enableToolbar:{type:Boolean,attr:"enable-toolbar",watchCallbacks:["updateToolbarVisibility"]},iframeLoaded:{state:!0},page:{type:Number,attr:"page"},print:{method:!0},resourcesUrl:{context:"resourcesUrl"},scale:{type:"Any",attr:"scale",watchCallbacks:["updateScale"]},setScale:{method:!0},src:{type:String,attr:"src"},window:{context:"window"}}}static get events(){return[{name:"pageChange",method:"pageChange",bubbles:!0,cancelable:!0,composed:!0},{name:"onLinkClick",method:"onLinkClick",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return".sc-phemium-pdf-viewer-h{--pdf-viewer-top-offset:0px;--pdf-viewer-bottom-offset:0px}.sc-phemium-pdf-viewer-h, iframe.sc-phemium-pdf-viewer{display:block;height:100%;width:100%}iframe.sc-phemium-pdf-viewer{border:none;visibility:hidden}iframe.loaded.sc-phemium-pdf-viewer{visibility:visible}"}}t.CSSVariables=["--pdf-viewer-top-offset","--pdf-viewer-bottom-offset"];export{t as PhemiumPdfViewer};